---
/**
 * WebSiteSchema Component - Desktop Only
 *
 * Purpose: Add JSON-LD structured data for the website as a whole.
 *
 * Implementation: Output schema.org WebSite structured data with search action
 * and site navigation information.
 *
 * Justification: Establishes the website entity in search engines, enables
 * sitelinks search box in Google, and provides overall site context.
 */

import { SITE } from "../config/site";

interface Props {
  url?: URL | string;
}

const { url } = Astro.props;

// Get site URL
const siteUrl = url
  ? typeof url === "string"
    ? new URL(url)
    : url
  : Astro.site || new URL(Astro.url.origin);

// Generate WebSite structured data following schema.org
const structuredData = {
  "@context": "https://schema.org",
  "@type": "WebSite",
  name: SITE.name,
  description: SITE.description,
  url: siteUrl.toString(),

  // Enable sitelinks search box in Google
  potentialAction: {
    "@type": "SearchAction",
    target: {
      "@type": "EntryPoint",
      urlTemplate: `${siteUrl.toString()}writing?q={search_term_string}`,
    },
    "query-input": "required name=search_term_string",
  },

  // Site author/creator
  author: {
    "@type": "Person",
    name: SITE.name,
    email: SITE.email,
  },
};
---

<script type="application/ld+json" set:html={JSON.stringify(structuredData)} />
