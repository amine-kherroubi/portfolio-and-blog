---
import BaseLayout from "../../layouts/BaseLayout.astro";
import Navigation from "../../components/Navigation.astro";
import Footer from "../../components/Footer.astro";
import FilterBar from "../../components/FilterBar.astro";
import Tag from "../../components/Tag.astro";
import { getTagsByIds, type TagId } from "../../config/tags";

const posts = [
  {
    title: "The Beauty of Constraint",
    excerpt: "How limitations in design lead to creative breakthroughs",
    date: "2024-03-15",
    readTime: "5 min",
    slug: "beauty-of-constraint",
    tags: ["design", "minimalism", "swiss-design"] as TagId[],
  },
  {
    title: "Swiss Design in Digital Age",
    excerpt: "Adapting timeless principles to modern interfaces",
    date: "2024-03-01",
    readTime: "7 min",
    slug: "swiss-design-digital",
    tags: ["design", "swiss-design", "web-development"] as TagId[],
  },
  {
    title: "Minimalism in Code",
    excerpt: "Writing cleaner software through deliberate simplicity",
    date: "2024-02-20",
    readTime: "6 min",
    slug: "minimalism-in-code",
    tags: ["python", "typescript", "minimalism"] as TagId[],
  },
  {
    title: "Grid Systems Explained",
    excerpt: "Mathematics and psychology behind effective layouts",
    date: "2024-02-05",
    readTime: "10 min",
    slug: "grid-systems",
    tags: ["design", "design-systems", "typography"] as TagId[],
  },
];

const allTags = getTagsByIds([...new Set(posts.flatMap((p) => p.tags))]);
---

<BaseLayout title="Blog">
  <Navigation currentPage="blog" />

  <section class="py-32 lg:py-40 px-8 md:px-16 lg:px-20 xl:px-32">
    <div class="max-w-[1400px] mx-auto">
      <h1
        class="text-[clamp(4rem,12vw,10rem)] font-bold leading-[0.9] tracking-[-0.03em] mb-16 lg:mb-20"
      >
        Blog
      </h1>
      <p
        class="text-[1.5rem] lg:text-[1.75rem] leading-normal font-light tracking-[-0.01em] max-w-3xl text-black/80"
      >
        Thoughts on design, technology, and the creative process
      </p>
    </div>
  </section>

  <FilterBar tags={allTags} type="blog" />

  <section class="py-20 lg:py-24 px-8 md:px-16 lg:px-20 xl:px-32">
    <div class="max-w-[1400px] mx-auto space-y-0">
      {
        posts.map((post, i) => (
          <article
            class:list={[
              "border-b-2 border-black",
              i === posts.length - 1 && "border-b-0",
            ]}
            data-blog-item
            data-blog-tags={post.tags.join(",")}
          >
            <a
              href={`/blog/${post.slug}`}
              class="group block py-16 lg:py-20 transition-colors duration-200 hover:bg-black hover:text-white"
            >
              <div class="grid grid-cols-12 gap-x-6 md:gap-x-12 lg:gap-x-16 items-start">
                <time class="col-span-12 lg:col-span-2 text-[0.8125rem] font-bold uppercase tracking-[0.15em] opacity-60 group-hover:opacity-100">
                  {post.date}
                </time>

                <div class="col-span-12 lg:col-span-7 mt-6 lg:mt-0">
                  <h2 class="text-[2.25rem] lg:text-[2.75rem] font-bold leading-[1.1] tracking-[-0.02em] mb-5">
                    {post.title}
                  </h2>
                  <p class="text-[1.125rem] lg:text-[1.25rem] leading-[1.6] opacity-70 group-hover:opacity-100 mb-6">
                    {post.excerpt}
                  </p>
                  <div class="flex flex-wrap gap-2">
                    {getTagsByIds(post.tags).map((tag) => (
                      <Tag label={tag.label} variant="default" />
                    ))}
                  </div>
                </div>

                <span class="col-span-12 lg:col-span-3 flex items-center justify-start lg:justify-end mt-8 lg:mt-0 text-[0.8125rem] uppercase tracking-[0.15em] opacity-60 group-hover:opacity-100">
                  {post.readTime}
                </span>
              </div>
            </a>
          </article>
        ))
      }
    </div>
  </section>

  <Footer variant="light" />
</BaseLayout>
