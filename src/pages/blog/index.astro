---
import BaseLayout from "../../layouts/BaseLayout.astro";
import Navigation from "../../components/Navigation.astro";
import Footer from "../../components/Footer.astro";
import FilterBar from "../../components/FilterBar.astro";
import BlogCard from "../../components/BlogCard.astro";
import PageHeader from "../../components/PageHeader.astro";
import ContentList from "../../components/ContentList.astro";
import { getTagsByIds, type TagId } from "../../config/tags";

const posts = [
  {
    title: "The Beauty of Constraint",
    excerpt: "How limitations in design lead to creative breakthroughs",
    date: "2024-03-15",
    readTime: "5 min",
    slug: "beauty-of-constraint",
    tags: ["design", "minimalism", "swiss-design"] as TagId[],
  },
  {
    title: "Swiss Design in Digital Age",
    excerpt: "Adapting timeless principles to modern interfaces",
    date: "2024-03-01",
    readTime: "7 min",
    slug: "swiss-design-digital",
    tags: ["design", "swiss-design", "web-development"] as TagId[],
  },
  {
    title: "Minimalism in Code",
    excerpt: "Writing cleaner software through deliberate simplicity",
    date: "2024-02-20",
    readTime: "6 min",
    slug: "minimalism-in-code",
    tags: ["python", "typescript", "minimalism"] as TagId[],
  },
  {
    title: "Grid Systems Explained",
    excerpt: "Mathematics and psychology behind effective layouts",
    date: "2024-02-05",
    readTime: "10 min",
    slug: "grid-systems",
    tags: ["design", "design-systems", "typography"] as TagId[],
  },
];

const allTags = getTagsByIds([...new Set(posts.flatMap((p) => p.tags))]);
---

<BaseLayout title="Blog">
  <Navigation currentPage="blog" />

  <PageHeader
    title="Blog"
    description="Thoughts on design, technology, and the creative process"
  />

  <FilterBar tags={allTags} type="blog" />

  <ContentList>
    {
      posts.map((post, i) => (
        <div
          data-blog-item
          data-blog-tags={post.tags.join(",")}
          class:list={[i === posts.length - 1 && "border-b-0"]}
        >
          <BlogCard
            title={post.title}
            excerpt={post.excerpt}
            date={post.date}
            readTime={post.readTime}
            slug={post.slug}
            tags={post.tags}
            variant="list"
          />
        </div>
      ))
    }
  </ContentList>

  <Footer />
</BaseLayout>
