---
/**
 * Home Page - Desktop Only (Refactored)
 *
 * Now uses shared social utilities for consistent social link handling.
 */

import BaseLayout from "../layouts/BaseLayout.astro";
import Navigation from "../components/Navigation.astro";
import Footer from "../components/Footer.astro";
import ContactForm from "../components/ContactForm.astro";
import WebSiteSchema from "../components/WebSiteSchema.astro";
import { SITE } from "../config/site";
import { getSocialLinks } from "@/utils/social";

const socialLinks = getSocialLinks();
---

<BaseLayout>
  <Navigation currentPage="home" slot="header" />

  <main id="main-content" data-pagefind-ignore>
    <!-- Hero Section -->
    <section
      class="min-h-[calc(100vh-5rem)] flex items-center px-8 py-24"
      itemscope
      itemtype="https://schema.org/Person"
    >
      <div class="max-w-container w-full mx-auto">
        <h1
          class="text-[8rem] font-bold leading-[0.95] tracking-[-0.02em] mb-32"
          itemprop="name"
        >
          Amine<br />Kherroubi
        </h1>

        <div class="grid grid-cols-12 gap-12">
          <div class="col-span-6">
            <p
              class="text-2xl leading-relaxed font-light tracking-tight mb-4"
              itemprop="jobTitle"
            >
              Designer & Developer
            </p>
            <p
              class="text-2xl leading-relaxed font-light tracking-tight text-black/70"
              itemprop="description"
            >
              Focused on clarity, function, and timeless solutions
            </p>
          </div>
        </div>

        <meta itemprop="email" content={SITE.email} />
        <meta itemprop="url" content={Astro.url.origin} />
      </div>
    </section>

    <!-- Philosophy Section -->
    <section class="py-24 px-8 border-t-2 border-black">
      <div class="max-w-container mx-auto">
        <div class="grid grid-cols-12 gap-12">
          <h2
            class="col-span-3 text-3xl font-bold leading-[1.1] tracking-[-0.02em]"
          >
            Philosophy
          </h2>

          <div class="col-span-7 col-start-6 space-y-8">
            <p class="text-2xl leading-relaxed tracking-tight font-light">
              Every design decision stems from function. Form follows purpose.
              Systems over decoration. Clarity over complexity.
            </p>
            <p
              class="text-2xl leading-relaxed tracking-tight font-light text-black/70"
            >
              Working at the intersection of design and technology, creating
              solutions that prioritize usability, accessibility, and longevity.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Contact Form Section -->
    <ContactForm />

    <!-- Social Links Section -->
    {
      socialLinks.length > 0 && (
        <section class="py-16 px-8 bg-white border-t-2 border-black">
          <div class="max-w-container mx-auto">
            <div class="flex flex-wrap gap-8 items-center justify-center">
              <span class="text-sm font-bold uppercase tracking-[0.15em] text-black/50">
                Connect
              </span>
              {socialLinks.map(({ href, label, platform }) => (
                <a
                  href={href}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="text-sm font-bold uppercase tracking-[0.15em] hover:opacity-50 transition-opacity duration-200 focus-visible:opacity-50"
                  data-social-platform={platform}
                  data-social-label={label}
                >
                  {label}
                </a>
              ))}
            </div>
          </div>
        </section>
      )
    }
  </main>

  <Footer slot="footer" />

  <WebSiteSchema slot="head" url={Astro.site} />
</BaseLayout>

<script>
  /**
   * Track social interactions with shared utilities
   */
  import { trackSocialClick } from "@/utils/use-analytics";

  function initHomePage() {
    // Track social link clicks
    const socialLinks = document.querySelectorAll<HTMLAnchorElement>(
      "[data-social-platform]"
    );

    socialLinks.forEach((link) => {
      link.addEventListener("click", () => {
        const platform = link.dataset["socialPlatform"];
        const label = link.dataset["socialLabel"];
        if (platform) {
          trackSocialClick(platform, `home_page_${label}`);
        }
      });
    });
  }

  // Initialize on page load
  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", initHomePage);
  } else {
    initHomePage();
  }

  // Reinitialize on Astro page navigation
  document.addEventListener("astro:page-load", initHomePage);
</script>

<style>
  @media (prefers-reduced-motion: no-preference) {
    html {
      scroll-behavior: smooth;
    }

    h1 {
      animation: fadeInUp 0.2s ease;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  }
</style>
