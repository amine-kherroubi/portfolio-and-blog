---
/**
 * Work Project Page - Desktop Only
 */

import BaseLayout from "../../layouts/BaseLayout.astro";
import Navigation from "../../components/Navigation.astro";
import Footer from "../../components/Footer.astro";
import { getCollection, render } from "astro:content";
import Tag from "../../components/Tag.astro";
import { getTagsByIds, type TagId } from "../../config/tags";

export async function getStaticPaths() {
  const workProjects = await getCollection("work");
  return workProjects.map((project) => ({
    params: { slug: project.id },
    props: { project },
  }));
}

const { project } = Astro.props;
const { Content } = await render(project);
const tagObjects = getTagsByIds(project.data.tags as TagId[]);
---

<BaseLayout title={`${project.data.title} â€” Project`}>
  <Navigation currentPage="work" />

  <!-- Project Header -->
  <section class="py-24 px-8">
    <div class="max-w-container mx-auto">
      <div
        class="mb-12 flex items-center gap-4 text-sm font-bold uppercase tracking-[0.15em] text-black/50"
      >
        <span>{project.data.year}</span>
      </div>

      <div class="w-16 h-0.5 bg-black mb-12"></div>

      <h1 class="text-7xl font-bold leading-[1.1] tracking-[-0.02em] mb-8">
        {project.data.title}
      </h1>

      <p
        class="text-3xl text-black/70 leading-relaxed font-light tracking-tight max-w-5xl mb-8"
      >
        {project.data.description}
      </p>

      {
        tagObjects.length > 0 && (
          <div class="flex flex-wrap gap-2 mt-6">
            {tagObjects.map((tag) => (
              <Tag label={tag.label} variant="large" />
            ))}
          </div>
        )
      }
    </div>
  </section>

  <!-- Project Visualization -->
  <section class="px-8 mb-24">
    <div class="max-w-container mx-auto">
      <div
        class="aspect-video bg-gray-100 border-2 border-black flex items-center justify-center"
      >
        <p class="text-black/30 text-lg font-bold uppercase tracking-[0.15em]">
          Project Visualization
        </p>
      </div>
    </div>
  </section>

  <!-- Project Content -->
  <section class="px-8 mb-24">
    <div class="max-w-container mx-auto">
      <div class="prose prose-lg max-w-4xl">
        <Content />
      </div>
    </div>
  </section>

  <!-- Navigation -->
  <section class="px-8 mb-24">
    <div class="max-w-container mx-auto">
      <a
        href="/work"
        class="inline-flex items-center gap-3 text-sm font-bold uppercase tracking-[0.15em] hover:opacity-50 transition-opacity duration-200 focus-visible:opacity-50"
      >
        All Projects
      </a>
    </div>
  </section>

  <Footer />
</BaseLayout>
